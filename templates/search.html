<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Suggestions</title>
    <style>
        #suggestions {
            border: 1px solid #ddd;
            max-height: 150px;
            overflow-y: auto;
            position: absolute;
            background-color: white;
            width: 100%;
            box-shadow: 0px 2px 5px rgba(0,0,0,0.3);
        }
        .suggestion-item {
            padding: 8px;
            cursor: pointer;
        }
        .suggestion-item:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <input type="text" id="search-input" placeholder="Search...">
    <div id="suggestions"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const input = document.getElementById('search-input');
            const suggestionsBox = document.getElementById('suggestions');

            async function fetchData() {
                try {
                    const response = await fetch('https://groupietrackers.herokuapp.com/api/artists');
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return await response.json();
                } catch (error) {
                    console.error('There was a problem with the fetch operation:', error);
                    return [];
                }
            }

            input.addEventListener('input', async () => {
                const query = input.value.toLowerCase();
                if (!query) {
                    suggestionsBox.innerHTML = '';
                    return;
                }

                const artistsData = await fetchData();
                const matches = artistsData.filter(artist => 
                    artist.Name.toLowerCase().includes(query) ||
                    artist.Members.toLowerCase().includes(query) ||
                    artist.Location.toLowerCase().includes(query)
                );

                suggestionsBox.innerHTML = matches.map(match =>
                    `<div class="suggestion-item">${match.Name} - ${match.Genre} - ${match.City}</div>`
                ).join('');

                document.querySelectorAll('.suggestion-item').forEach(item => {
                    item.addEventListener('click', () => {
                        input.value = item.textContent.split(' - ')[0];
                        suggestionsBox.innerHTML = '';
                    });
                });
            });
        });
    </script>
</body>
</html>
